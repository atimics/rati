FROM node:20-alpine

# Install minimal dependencies
RUN apk add --no-cache curl bash

WORKDIR /app

# Create a minimal package.json
RUN echo '{"name":"wormhole-mock","version":"1.0.0"}' > package.json

# Install only essential dependencies
RUN npm install express cors

# Copy the service file
COPY docker/wormhole-dev-service.js .

EXPOSE 7070 7071 8999

CMD ["node", "wormhole-dev-service.js"]